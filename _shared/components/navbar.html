<nav class="nav" id="nav">
  <div class="nav-inner">
    <div class="nav-left">
      <a href="/" class="nav-logo">
        <span class="nav-logo-fallback">{{SITE.name}}<span>»</span></span>
      </a>
      <ul class="nav-links">
        <li><a href="/" data-nav-link="services">Services</a></li>
        <li><a href="/" data-nav-link="process">How We Work</a></li>
        <li><a href="/" data-nav-link="case-studies">Case Studies</a></li>
        <li><a href="/" data-nav-link="industries">Industries</a></li>
        <li><a href="/" data-nav-link="reviews">Reviews</a></li>
      </ul>
    </div>
    <div class="nav-right">
      <a href="/#consultation" class="btn btn-primary nav-cta">Free Consultation <span class="btn-arrow">→</span></a>
    </div>
    <button class="nav-mobile-toggle" aria-label="Open navigation menu">
      <span></span><span></span><span></span>
    </button>
  </div>
</nav>

<script>
(function() {
  var pathSegments = window.location.pathname.replace(/\/+$/, '').split('/').filter(Boolean);
  var depth = pathSegments.length;
  var homePrefix = depth === 0 ? '' : Array(depth).fill('..').join('/') + '/';

  var linkMap = {
    'services':     homePrefix + 'services/',
    'process':      homePrefix + '#process',
    'case-studies': homePrefix + 'case-studies/',
    'industries':   homePrefix + 'industries/',
    'reviews':      homePrefix + '#testimonials'
  };

  document.querySelectorAll('a[data-nav-link]').forEach(function(link) {
    var key = link.getAttribute('data-nav-link');
    if (linkMap[key]) link.href = linkMap[key];
  });

  // Mobile toggle — button is already in DOM when this script runs
  var btn = document.querySelector('.nav-mobile-toggle');
  var links = document.querySelector('.nav-links');
  if (btn && links) {
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      links.classList.toggle('show');
      btn.classList.toggle('open');
    });
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.nav-inner') && links.classList.contains('show')) {
        links.classList.remove('show');
        btn.classList.remove('open');
      }
    });
  }
})();
</script>